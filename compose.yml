services:
  database:
    image: overv/openstreetmap-tile-server
    command: run
    volumes:
      - osm-data:/data/database
    ports:
      - "5432:5432"
    environment:
      - PGPASSWORD=${PGPASSWORD:-}
  tiles:
    image: maptiler/tileserver-gl
    command: --file /data/${REGION}.mbtiles
    volumes:
      - /data:/data
    ports:
      - "8080:8080"
  routing:
    image: ghcr.io/project-osrm/osrm-backend
    command: osrm-routed --algorithm mld /data/${REGION}.osrm
    volumes:
      - /data:/data
    ports:
      - "5000:5000"

volumes:
  osm-data:
    external: true